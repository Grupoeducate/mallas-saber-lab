<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mallas Saber Lab - Grupo Ed√∫cate Colombia</title>
  <link href="https://fonts.googleapis.com/css2?family=Barlow+Condensed:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --color-primary-100: #17334B;
      --color-primary-200: #11678B;
      --color-primary-300: #54BBAB;
      --color-secondary-100: #F39325;
      --color-black: #000000;
      --color-white: #FFFFFF;
      --color-gray: #808080;
      --font-family: 'Barlow Condensed', sans-serif;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: var(--font-family);
      background: var(--color-white);
      color: var(--color-black);
      line-height: 1.5;
    }
    
    .header {
      background: linear-gradient(135deg, var(--color-primary-100), var(--color-primary-200));
      color: var(--color-white);
      padding: 1.5rem 2rem;
      text-align: center;
    }
    .header h1 { font-size: 2rem; font-weight: 700; margin-bottom: 0.25rem; }
    .header p { opacity: 0.9; font-weight: 300; }
    
    .dashboard { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }
    .filtros {
      background: #f8f9fa;
      padding: 2rem;
      border-radius: 12px;
      box-shadow: 0 4px 20px rgba(23,51,75,0.1);
      margin-bottom: 2rem;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 1rem;
    }
    label { font-weight: 600; color: var(--color-primary-100); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 0.5px; }
    select { 
      width: 100%; padding: 0.75rem; border: 2px solid #e9ecef; border-radius: 8px; 
      font-family: inherit; font-size: 1rem; background: white;
    }
    select:focus { outline: none; border-color: var(--color-primary-300); box-shadow: 0 0 0 3px rgba(84,187,171,0.1); }
    .radio-group { display: flex; gap: 1rem; }
    .radio-group label { display: flex; align-items: center; gap: 0.5rem; cursor: pointer; font-weight: 400; text-transform: none; }
    .btn-buscar {
      grid-column: 1 / -1; background: linear-gradient(135deg, var(--color-primary-100), var(--color-primary-200));
      color: white; border: none; padding: 1rem 2rem; font-family: inherit; font-size: 1.1rem;
      font-weight: 600; border-radius: 8px; cursor: pointer; transition: all 0.3s;
    }
    .btn-buscar:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(23,51,75,0.3); }
    
    .resultados { display: none; animation: fadeIn 0.5s; }
    .resultados.mostrar { display: block; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    .tabla-container {
      background: white; border-radius: 12px; box-shadow: 0 8px 32px rgba(0,0,0,0.1);
      overflow: hidden; border: 1px solid #e9ecef;
    }
    table { width: 100%; border-collapse: collapse; }
    th { background: var(--color-primary-100); color: white; padding: 1rem; text-align: left; font-weight: 600; font-size: 0.85rem; text-transform: uppercase; }
    td { padding: 1rem; border-bottom: 1px solid #f1f3f4; vertical-align: top; }
    tr:hover { background: rgba(84,187,171,0.05); cursor: pointer; }
    tr.copiable { background: rgba(243,147,37,0.1) !important; }
    .codigo { background: var(--color-secondary-100); color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.8rem; font-weight: 700; }
    .array { background: #f8f9fa; padding: 0.75rem; border-radius: 6px; font-size: 0.9rem; }
    .array ul { margin: 0; padding-left: 1.25rem; }
    
    @media (max-width: 768px) {
      .filtros { grid-template-columns: 1fr; padding: 1.5rem; }
      .tabla-container { overflow-x: auto; display: block; }
      th, td { padding: 0.75rem 0.5rem; font-size: 0.85rem; }
    }
  </style>
</head>
<body>
  <header class="header">
    <h1>Mallas Saber Lab</h1>
    <p>Propuesta Curricular Nacional - Grupo Ed√∫cate Colombia</p>
  </header>

  <main class="dashboard">
    <section class="filtros">
      <div class="filtro-grupo">
        <label>Mi colegio usa</label>
        <div class="radio-group">
          <label><input type="radio" name="periodos" value="3" checked> 3 Per√≠odos</label>
          <label><input type="radio" name="periodos" value="4"> 4 Per√≠odos</label>
        </div>
      </div>
      <div class="filtro-grupo">
        <label for="area">√Årea</label>
        <select id="area"><option value="">Seleccionar √°rea</option><option value="matematicas">Matem√°ticas</option></select>
      </div>
      <div class="filtro-grupo">
        <label for="grado">Grado</label>
        <select id="grado" disabled><option value="">Seleccionar grado</option><option value="5">5¬∞</option></select>
      </div>
      <div class="filtro-grupo">
        <label for="periodo">Per√≠odo</label>
        <select id="periodo" disabled><option value="">Seleccionar per√≠odo</option></select>
      </div>
      <div class="filtro-grupo">
        <label for="componente">Componente</label>
        <select id="componente" disabled><option value="todos">Todos</option></select>
      </div>
      <button class="btn-buscar" onclick="buscarMalla()">üîç Consultar Malla</button>
    </section>

    <section id="resultados" class="resultados">
      <div class="tabla-container">
        <table id="tabla-mallas">
          <thead><tr><th>Componente</th><th>C√≥digo EBC</th><th>Estandar</th><th>DBA</th><th>Evidencias</th><th>Saberes</th><th>Socioemocional</th><th>Tareas DCE</th><th>Fuente</th></tr></thead>
          <tbody id="tabla-body"></tbody>
        </table>
      </div>
    </section>
  </main>

  <script>
    const dataMallas = {
      matematicas: {5: {1: {
        'numerico-variacional': [{
          codigo: 'EBC-Mat-5-1', componente: 'Num√©rico Variacional',
          estandar: 'Resuelvo y formulo problemas cuya estrategia de soluci√≥n requiera...',
          dba: ['DBA 1: Describe e interpreta variaciones...', 'DBA 8: Interpreta la relaci√≥n parte-todo...'],
          evidencias: ['Interpreta y utiliza n√∫meros naturales...', 'Propone patrones num√©ricos...'],
          saberes: ['Relaciones parte todo', 'Uso de n√∫meros racionales...', 'Planteamiento de patrones'],
          socioemocional: 'Pendiente', tareas_dce: ['Pendiente'], fuente: 'PG-8'
        }],
        'espacial-metrico': [{
          codigo: 'EBC-Mat-5-6', componente: 'Espacial M√©trico',
          estandar: 'Identifica y justifica relaciones de congruencia...',
          dba: ['DBA 6: Justifica relaciones entre superficie...', 'DBA 4: Relaciona objetos tridimensionales...'],
          evidencias: ['Reconoce relaciones intra e inter figurales...'], saberes: ['Relaciones intra e inter figurales'],
          socioemocional: 'Pendiente', tareas_dce: ['Pendiente'], fuente: 'PG-8'
        }],
        'aleatorio': [{
          codigo: 'EBC-Mat-5-10', componente: 'Aleatorio',
          estandar: 'Interpreto informaci√≥n presentada en tablas y gr√°ficas.',
          dba: ['DBA 10: Formula preguntas y elabora encuestas...'],
          evidencias: ['Registra, organiza y presenta la informaci√≥n...'], saberes: ['Dise√±o, recolecci√≥n de datos...'],
          socioemocional: 'Pendiente', tareas_dce: ['Pendiente'], fuente: 'PG-8'
        }]
      }}}
    };

    document.querySelectorAll('select').forEach((s,i) => s.addEventListener('change',e=>{
      const selects = ['#area','#grado','#periodo','#componente'];
      selects.slice(i+1).forEach(id=>document.querySelector(id).disabled=!e.target.value);
      if(e.target.id==='periodo') updateComponentes();
    }));

    function updateComponentes() {
      const periodo = document.getElementById('periodo').value;
      const componente = document.getElementById('componente');
      componente.innerHTML = '<option value="todos">Todos</option>';
      if(periodo) {
        const malla = dataMallas[document.getElementById('area').value]?.[document.getElementById('grado').value]?.[periodo];
        if(malla) Object.keys(malla).forEach(key=> {
          componente.innerHTML += `<option value="${key}">${key.replace('-',' ').replace(/\b\w/g,c=>c.toUpperCase())}</option>`;
        });
      }
      componente.disabled = !periodo;
    }

    function buscarMalla() {
      const area = document.getElementById('area').value;
      const grado = document.getElementById('grado').value;
      const periodo = document.getElementById('periodo').value;
      const componente = document.getElementById('componente').value;
      
      if(!area || !grado || !periodo) return alert('Selecciona √°rea, grado y per√≠odo');
      
      const malla = dataMallas[area]?.[grado]?.[periodo];
      if(!malla) return document.getElementById('resultados').innerHTML = '<p style="padding:2rem;text-align:center">No hay datos</p>';
      
      const items = componente === 'todos' ? Object.values(malla).flat() : malla[componente] || [];
      document.getElementById('tabla-body').innerHTML = items.map(item => `
        <tr onclick="navigator.clipboard.writeText('${[item.componente,item.codigo,item.estandar,item.dba.join(';'),item.evidencias.join(';'),item.saberes.join(';'),item.socioemocional,item.tareas_dce,item.fuente].join('\t')}').then(()=>this.classList.add('copiable'),setTimeout(()=>this.classList.remove('copiable'),1000))" title="Click para copiar">
          <td>${item.componente}</td><td><span class="codigo">${item.codigo}</span></td><td>${item.estandar}</td>
          <td class="array"><ul>${item.dba.map(d=>`<li>${d}</li>`).join('')}</ul></td>
          <td class="array"><ul>${item.evidencias.map(e=>`<li>${e}</li>`).join('')}</ul></td>
          <td class="array"><ul>${item.saberes.map(s=>`<li>${s}</li>`).join('')}</ul></td>
          <td>${item.socioemocional}</td><td>${item.tareas_dce}</td><td>${item.fuente}</td>
        </tr>`).join('');
      document.getElementById('resultados').classList.add('mostrar');
    }
  </script>
</body>
</html>
